<!-- https://jsonplaceholder.typicode.com/ -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Formulario de Alta de Persona</h1>

    <fieldset>
        <legend>Formulario</legend>
        <form action="#" method="post" id="form1">
            <input type="text" id="nombre" placeholder="Nombre">
            <input type="text" id="apellidos" placeholder="Apellidos">
            <!-- RADIO BOTONES se relacionan por el atrib NAME -->
            
            <fieldset>
                <legend>Sexo</legend>
                <label for="hombre">Hombre</label>
                <input type="radio" id="hombre" value="HOMBRE" name="sexo">
                <label for="mujer">Mujer</label>
                <input type="radio" id="mujer" value="MUJER" name="sexo">
                <label for="otro">Otro</label>
                <input type="radio" id="otro" value="OTRO" name="sexo"> 
                <!-- lo llamo por el id, pero el valor que me quedo es el value -->
            </fieldset>
            
            <input type="number" id="salario" placeholder="Salario" min="1000" max="3000">
            
            <label for="poblacion">Poblacion</label>
            <select name="poblacion" id="poblacion">
                <option value="0"></option>
                <option value="Madrid">Madrid</option>
                <option value="Cuenca">Cuenca</option>
                <option value="Segovia">Segovia</option>
                <option value="Guadalajara">Guadalajara</option>
            </select>

            <label for="sindicado">Sindicado</label>
            <input type="checkbox" name="sindicado" id="sindicado">
            <!-- id solo sirve si no interviene JS -->

            <input type="submit">
        </form>
    </fieldset>

    <script>
        const arrayPersona = [];

        //onclick en SUBMIT -> recoger los datos y alta 
        const formulario = document.querySelector("#form1");

        formulario.addEventListener("submit", function(event) {
            // al pasar por callback el objeto EVENT
            // trae mas informacion sobre el evento 
            event.preventDefault();  // evitar el comportamiento por defecto de submit de enviar al servidor
            event.stopPropagation(); 

            const persona = new Object();
            persona.nombre = document.querySelector("#nombre").value;
            console.log(`nombre: ${persona.nombre}`);
            persona.apellidos = document.querySelector("#apellidos").value;

            // checked en TRUE (para radiobotones)
            persona.sexo = document.querySelector("input[type='radio']:checked").value;
            console.log(`sexo: ${persona.sexo}`);

            persona.salario = document.querySelector("#salario").value;

            // tomamos el .value a partir del id #pobl
            persona.poblacion = document.querySelector("#poblacion").value; 
            console.log(`poblacion: ${persona.poblacion}`);
            
            persona.sindicado = document.querySelector("#sindicado").checked;
            console.log(`sindicado: ${persona.sindicado}`);

            //GUARDO la persona
            arrayPersona.push(persona);

            // this == el formulario
            this.reset();

            // mando el formulario con AJAX = no refresca la pag
            // no quiero que se recarge toda la pagina al clickon submit
            // ajax se puede implementar por xml (mas viejo) o por FETCH


            arrayPersona.forEach(p => {
                console.table(p);
            });

        });
    </script>

</body>
</html>


<!-- 
    DEPURAR EN CHROME

    - inspect -> sources
    - click en la linea donde quiera breakpoint
    - marcar el simbolo PAUSA ||


 -->


<!-- 
    desplegable on click si tiene coche
    evento CHANGE
    // display none
    // display hidden
 -->